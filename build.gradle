buildscript {
	repositories {
		jcenter()
		maven { url = 'https://repo.spongepowered.org/maven' }
	}

	dependencies {
		classpath 'com.github.jengelman.gradle.plugins:shadow:4.0.4'
	}
}

apply plugin: 'com.github.johnrengelman.shadow'
apply plugin: 'java'
apply plugin: 'idea'


group = 'com.enderzombi102'
version = '1.0-SNAPSHOT'

configurations {
    shade
}

subprojects {

	apply plugin: 'java'
	apply plugin: 'maven'

	version = rootProject.mod_version
	archivesBaseName = rootProject.archives_base_name

	sourceCompatibility = JavaVersion.VERSION_1_8
	targetCompatibility = JavaVersion.VERSION_1_8

	tasks.withType(JavaCompile) {
		options.encoding = "UTF-8"
	}

}

dependencies {
	compile project( 'loadercomplex-common' )
	compile project( 'loadercomplex-bukkit' )
	compile project( 'loadercomplex-forge-12' )
	compile project( 'loadercomplex-fabric-12' )
	compile project( 'loadercomplex-sponge' )

	shade project( 'loadercomplex-common' )
	shade project( 'loadercomplex-bukkit' )
	shade project( 'loadercomplex-forge-12' )
	shade project( 'loadercomplex-fabric-12' )
	shade project( 'loadercomplex-sponge' )
}

shadowJar {
    configurations = [project.configurations.shade]
    from sourceSets.main.allSource
    classifier ''
}

jar {
	from "LICENSE"
    manifest {
        attributes([
                "Specification-Title"     : "LoaderComplex",
                "Specification-Vendor"    : "ENDERZOMBI102",
                "Specification-Version"   : "1", // We are version 1 of ourselves
                "Implementation-Title"    : project.name,
                "Implementation-Version"  : "${version}",
                "Implementation-Vendor"   : "ENDERZOMBI102",
                "Implementation-Timestamp": new Date().format("yyyy-MM-dd'T'HH:mm:ssZ")
        ])
    }
}

artifacts {
    archives shadowJar
}
